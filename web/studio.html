<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="css/bootstrap.min.css" rel="stylesheet">
<title>影厅管理</title>
<style>

.table th, .table td {
	text-align: center;
	height: 30px;
}
</style>
<script src="js/jquery-3.2.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>

</head>
<body >
  <div
		style="height: 50px; line-height: 50px; font-size: 25px; vertical-align: middle; text-align: center"
		class="bg-primary">汉唐剧院管理系统</div>

  <div class="row" style="padding: 10px 10px">

		<!-- 左导航栏 -->
		<div class="col-md-2">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h3 class="panel-title">导航</h3>
				</div>
				<div class="panel-body">
					<table class="table table-hover">
						<tr>
							<td><img src="images/yingting.png" width="24px">&nbsp;&nbsp;<a
								href="javascript:" onclick=select_studio(1);><font color="red">影厅管理</font></a></td>
						</tr>
						<tr>
							<td><img src="images/zuowei.png" width="24px">&nbsp;&nbsp;<a
								href="javascript:alert('你们自己做!')">座位管理</a></td>
						</tr>
						<tr>
							<td><img src="images/yingpian.png" width="24px">&nbsp;&nbsp;<a
								href="javascript:" onclick=select_play(1);>影片管理</a></td>
						</tr>
						<tr>
							<td><img src="images/dingpiao.png" width="24px">&nbsp;&nbsp;<a
								href="javascript:alert('你们自己做!')">计划管理</a></td>
						</tr>
						<tr>
							<td><img src="images/renyuan.png" width="24px">&nbsp;&nbsp;<a
								href="javascript:" onclick=select_employee(1);>员工管理</a></td>
						</tr>
					</table>
				</div>
			</div>
		</div>

  <div class="col-md-10" style="padding-top: 10px">

	<!-- 查询块 -->
	<div class="search">
		<form class="form-inline" name="myForm" action="#" method="post">
			<!-- <input type="hidden" name="method" value="search"/> -->
			<span>影厅名称:</span>
			<input type="text" class="form-control" id="studioname" name="studioname"/>&nbsp;&nbsp; 
			<input type="button" class="btn btn-primary" value="查   询" id="select"  />&nbsp;&nbsp;
			<input type="button" class="btn btn-danger" value="增   加" onclick="javascript:window.location='detail.html?type=add'" />
		</form>
	</div>


	<!-- 员工信息显示-->
	<div style="padding-top: 10px;" id="studio">
		<table id="table" class="table table-bordered table-hover" style="text-align: center;">
			<tr id="table_tr">
			</tr>
		</table>
	</div>

	<!-- 分页 -->
	  <nav aria-label="Page navigation" id="nav">
	  </nav>
  </div>
</div>
<script>

	// const studio  = document.getElementById("studio");
	// studio.style.display = "none";
</script>
  <script>
	  function select_studio(currentPage) {
		  $.get("studio/select",{currentPage:currentPage,studio_name:$("#studioname").val()},function (data) {
			  //数据
			  $("#table_tr").siblings().remove();
			  var lis = '<th>影厅编号</th>\n' +
					  '\t\t\t\t<th>影厅名称</th>\n' +
					  '\t\t\t\t<th>座位行数</th>\n' +
					  '\t\t\t\t<th>座位列数</th>\n' +
					  '\t\t\t\t<th>影厅描述</th>\n' +
					  '\t\t\t\t<th>操作</th>';
			  $("#table_tr").html(lis);
			  lis = "";
			  for (var i = 0; i<data.list.length ;i++){
				  var studio =data.list[i] ;
				  var td = '<tr>' +
						  '<td>'+studio.studio_id+'</td>'+
						  '<td>'+studio.studio_name+'</td>'+
						  '<td>'+studio.studio_row_count+'</td>'+
						  '<td>'+studio.studio_col_count+'</td>'+
						  '<td>'+studio.studio_introduction+'</td>'+
						  '<td>删除</td>'+
						  '</tr>';
				  lis +=td;
			  }
			  $("#table").append(lis);
			  //分页条
			  var before = data.currentPage - 1 ;
			  var after = data.currentPage + 1 ;
			  var nav = '<ul class="pagination">' +
					  '<li>' +
					  '<a href="javascript:select_studio('+before+')" aria-label="Previous">' +
					  '<span aria-hidden="true">&laquo;</span>' +
					  '</a>' +
					  ' </li>';

			  for (var i = 1; i <= data.totalPage;i++){
				  var ul = '<li><a href="javascript:select_studio('+i+')">'+i+'</a></li>';
				  nav +=ul;
			  }
			  nav += '<li>' +
					  '<a href="javascript:select_studio('+after+')" aria-label="Next">' +
					  '<span aria-hidden="true">&raquo;</span>' +
					  '</a>' +
					  '</li>' +
					  '</ul>'
			  $("#nav").html(nav);
		  });
	  }

	  function select_employee(currentPage) {
		  $.get("employee/select",{currentPage:currentPage},function (data) {
			  //数据
			  $("#table_tr").siblings().remove();
			  var lis = '<th>员工编号</th>\n' +
					  '\t\t\t\t<th>员工姓名</th>\n' +
					  '\t\t\t\t<th>员工电话</th>\n' +
					  '\t\t\t\t<th>员工住址</th>\n' +
					  '\t\t\t\t<th>员工邮箱</th>\n' +
					  '\t\t\t\t<th>员工账户</th>\n' +
					  '\t\t\t\t<th>员工密码</th>';
			  $("#table_tr").html(lis);
			  lis = "";
			  for (var i = 0; i<data.list.length ;i++){
				  var emp =data.list[i] ;
				  var td = '<tr>' +
						  '<td>'+emp.emp_no+'</td>'+
						  '<td>'+emp.emp_name+'</td>'+
						  '<td>'+emp.emp_tel_num+'</td>'+
						  '<td>'+emp.emp_addr+'</td>'+
						  '<td>'+emp.emp_email+'</td>'+
						  '<td>'+emp.emp_user+'</td>'+
						  '<td>'+emp.emp_password+'</td>'+
						  '</tr>';
				  lis +=td;
			  }
			  $("#table").append(lis);
			  //分页条
			  var before = data.currentPage - 1 ;
			  var after = data.currentPage + 1 ;
			  var nav = '<ul class="pagination">' +
					  '<li>' +
					  '<a href="javascript:select_employee('+before+')" aria-label="Previous">' +
					  '<span aria-hidden="true">&laquo;</span>' +
					  '</a>' +
					  ' </li>';

			  for (var i = 1; i <= data.totalPage;i++){
				  var ul = '<li><a href="javascript:select_employee('+i+')">'+i+'</a></li>';
				  nav +=ul;
			  }
			  nav += '<li>' +
					  '<a href="javascript:select_employee('+after+')" aria-label="Next">' +
					  '<span aria-hidden="true">&raquo;</span>' +
					  '</a>' +
					  '</li>' +
					  '</ul>'
			  $("#nav").html(nav);
		  });
	  }

	  function select_play(currentPage) {
		  $.get("play/select",{currentPage:currentPage},function (data) {
			  //数据
			  $("#table_tr").siblings().remove();
			  var lis = '<th>type_id</th>\n' +
					  '\t\t\t\t<th>type_id</th>\n' +
					  '\t\t\t\t<th>name</th>\n' +
					  '\t\t\t\t<th>introduction</th>\n' +
					  '\t\t\t\t<th>length</th>\n' +
					  '\t\t\t\t<th>ticket_price</th>\n' +
					  '\t\t\t\t<th>status</th>';
			  $("#table_tr").html(lis);
			  lis = "";
			  for (var i = 0; i<data.list.length ;i++){
				  var  play= data.list[i] ;
				  var td = '<tr>' +
						  '<td>'+play.play_type_id+'</td>'+
						  '<td>'+play.play_lang_id+'</td>'+
						  '<td>'+play.play_name+'</td>'+
						  '<td>'+play.play_introduction+'</td>'+
						  '<td>'+play.play_length+'</td>'+
						  '<td>'+play.play_ticket_price+'</td>'+
						  '<td>'+play.play_status+'</td>'+
						  '</tr>';
				  lis +=td;
			  }
			  $("#table").append(lis);
			  //分页条
			  var before = data.currentPage - 1 ;
			  var after = data.currentPage + 1 ;
			  var nav = '<ul class="pagination">' +
					  '<li>' +
					  '<a href="javascript:select_play('+before+')" aria-label="Previous">' +
					  '<span aria-hidden="true">&laquo;</span>' +
					  '</a>' +
					  ' </li>';

			  for (var i = 1; i <= data.totalPage;i++){
				  var ul = '<li><a href="javascript:select_play('+i+')">'+i+'</a></li>';
				  nav +=ul;
			  }
			  nav += '<li>' +
					  '<a href="javascript:select_play('+after+')" aria-label="Next">' +
					  '<span aria-hidden="true">&raquo;</span>' +
					  '</a>' +
					  '</li>' +
					  '</ul>'
			  $("#nav").html(nav);
		  });
	  }
  </script>
</body>
</html>
